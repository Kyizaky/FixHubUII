<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Detail Laporan</title>
    <link rel="stylesheet" href="css/detail-laporan-user.css">
</head>
<body>
    <div class="container">

        <div class="header-card">
            <div class="header-top">
                <div class="report-code" id="reportCode">LP-2024-001</div>
                <div class="status-badge menunggu" id="statusBadge">Menunggu</div>
            </div>
            <div class="report-date" id="reportDate">Dilaporkan pada 27 November 2024</div>
        </div>

        <div class="content-section">
            <div class="section-title">ğŸ“¦ Informasi Barang</div>
            <div class="info-grid">
                <div class="info-item">
                    <div class="info-icon">ğŸ·ï¸</div>
                    <div class="info-content">
                        <div class="info-label">Nama Barang</div>
                        <div class="info-value" id="namaBarang">-</div>
                    </div>
                </div>
                <div class="info-item">
                    <div class="info-icon">ğŸ“‚</div>
                    <div class="info-content">
                        <div class="info-label">Kategori</div>
                        <div class="info-value" id="kategori">-</div>
                    </div>
                </div>
                <div class="info-item">
                    <div class="info-icon">ğŸ“</div>
                    <div class="info-content">
                        <div class="info-label">Lokasi</div>
                        <div class="info-value" id="lokasi">-</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="content-section">
            <div class="section-title">ğŸ”§ Detail Kerusakan</div>
            <div class="info-grid">
                <div class="info-item">
                    <div class="info-icon">âš ï¸</div>
                    <div class="info-content">
                        <div class="info-label">Tingkat Kerusakan</div>
                        <div class="info-value" id="tingkatKerusakan" style="color: #FF9800;">-</div>
                    </div>
                </div>
                <div class="info-item">
                    <div class="info-icon">ğŸ“…</div>
                    <div class="info-content">
                        <div class="info-label">Tanggal Kejadian</div>
                        <div class="info-value" id="tanggalKejadian">-</div>
                    </div>
                </div>
            </div>
            <div style="margin-top: 20px;">
                <div class="info-label" style="margin-bottom: 8px;">Deskripsi Kerusakan</div>
                <div class="description-text" id="deskripsi">-</div>
            </div>
        </div>

        <div class="content-section" id="photoSection" style="display: none;">
            <div class="section-title">ğŸ“· Foto Kerusakan</div>
            <div class="images-container" id="imagesContainer">

            </div>
        </div>

        <div class="content-section">
            <div class="section-title">ğŸ“‹ Riwayat Status</div>
            <div class="timeline" id="timeline">

            </div>
        </div>

    </div>

    <div class="image-modal" id="imageModal" onclick="closeImageModal()">
        <span class="modal-close">Ã—</span>
        <img id="modalImage" src="" alt="Full size image">
    </div>

    <script>

        const reportData = {
            code: "LP-2024-001",
            namaBarang: "Komputer Lab 1",
            kategori: "Komputer & Laptop",
            lokasi: "Fakultas Teknik - Gedung A - R.101",
            tingkatKerusakan: "Sedang",
            tanggalKejadian: "25 November 2024",
            tanggalLaporan: "27 November 2024",
            deskripsi: "Monitor tidak menyala dan CPU berbunyi beep berulang kali. Sudah dicoba restart namun masalah masih berlanjut. Kemungkinan masalah pada RAM atau motherboard.",
            status: "menunggu",
            photos: [
                "img/funny.jpg",
                "img/funny.jpg",
                "img/funny.jpg"
            ],
            timeline: [
                {
                    status: "Laporan Diterima",
                    date: "27 November 2024, 10:30 WIB",
                    description: "Laporan telah diterima dan menunggu verifikasi dari admin",
                    person: "Admin"
                },
                {
                    status: "Sedang Diverifikasi",
                    date: "27 November 2024, 11:00 WIB",
                    description: "Tim teknis sedang memverifikasi laporan kerusakan",
                    person: "Admin"
                },
                {
                    status: "Menunggu Perbaikan",
                    date: "27 November 2024, 14:30 WIB",
                    description: "Laporan telah diverifikasi dan menunggu jadwal perbaikan",
                    person: "Admin"
                }
            ]
        };

        document.addEventListener('DOMContentLoaded', function() {
            loadReportData();
        });

        function loadReportData() {

            document.getElementById('reportCode').textContent = reportData.code;
            document.getElementById('reportDate').textContent = `Dilaporkan pada ${reportData.tanggalLaporan}`;
            
            const statusBadge = document.getElementById('statusBadge');
            statusBadge.textContent = getStatusText(reportData.status);
            statusBadge.className = `status-badge ${reportData.status}`;
            
            document.getElementById('namaBarang').textContent = reportData.namaBarang;
            document.getElementById('kategori').textContent = reportData.kategori;
            document.getElementById('lokasi').textContent = reportData.lokasi;
            
            const tingkatEl = document.getElementById('tingkatKerusakan');
            tingkatEl.textContent = reportData.tingkatKerusakan;
            tingkatEl.style.color = getTingkatColor(reportData.tingkatKerusakan);
            document.getElementById('tanggalKejadian').textContent = reportData.tanggalKejadian;
            document.getElementById('deskripsi').textContent = reportData.deskripsi;
            
            if (reportData.photos && reportData.photos.length > 0) {
                document.getElementById('photoSection').style.display = 'block';
                loadPhotos(reportData.photos);
            }
            
            loadTimeline(reportData.timeline);
            
        }

        function loadPhotos(photos) {
            const container = document.getElementById('imagesContainer');
            photos.forEach(photo => {
                const div = document.createElement('div');
                div.className = 'image-item';
                div.innerHTML = `<img src="${photo}" alt="Foto kerusakan">`;
                div.onclick = () => openImageModal(photo);
                container.appendChild(div);
            });
        }

        function loadTimeline(timeline) {
            const container = document.getElementById('timeline');
            timeline.forEach((item, index) => {
                const div = document.createElement('div');
                div.className = 'timeline-item';
                div.innerHTML = `
                    <div class="timeline-dot"></div>
                    ${index < timeline.length - 1 ? '<div class="timeline-line"></div>' : ''}
                    <div class="timeline-content">
                        <div class="timeline-status">${item.status}</div>
                        <div class="timeline-date">${item.date}</div>
                        <div class="timeline-desc">${item.description}</div>
                        <div class="timeline-person">ğŸ‘¤ ${item.person}</div>
                    </div>
                `;
                container.appendChild(div);
            });
        }

        function getStatusText(status) {
            const map = {
                'menunggu': 'Menunggu',
                'diproses': 'Diproses',
                'selesai': 'Selesai'
            };
            return map[status] || status;
        }

        function getTingkatColor(tingkat) {
            const map = {
                'Ringan': '#4CAF50',
                'Sedang': '#FF9800',
                'Berat': '#F44336'
            };
            return map[tingkat] || '#999';
        }

        function openImageModal(src) {
            document.getElementById('modalImage').src = src;
            document.getElementById('imageModal').classList.add('active');
        }

        function closeImageModal() {
            document.getElementById('imageModal').classList.remove('active');
        }
    </script>
</body>
</html>